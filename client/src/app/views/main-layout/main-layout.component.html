<div class="base-container">
  <div class="row" [@settingsToggle]="serverSettingsState || userSettingsState ? 'open' : 'closed'">
    <div class="primary-side-bar">
      <app-chat-servers 
        [currentUser]="currentUser"
        (notificationsToPass)="fetchNotificationsFromServers($event)">
      </app-chat-servers>
    </div>
    <div class="secondary-side-bar">
      <router-outlet name="secondary"></router-outlet>
      <div class="user-tab">
        <div 
          *ngIf="currentUser"
          class="flex">
          <user-avatar 
            [userId]="currentUser.id" 
            class="user-avatar"
            [username]="currentUser.username"/>
          <div class="user-name">{{ currentUser!.username }}</div>
          <i 
            class="fa-solid fa-gear options-icon"
            matTooltip="User Settings"
            matTooltipPosition="above"
            (click)="toggleUserSettingsView($event)">
          </i>
        </div>
      </div>
    </div>
    <div class="main-container">
      <router-outlet name="main"></router-outlet>
    </div>
  </div>
  <chat-server-settings 
    *ngIf="serverSettingsState" 
    (onClose)="toggleServerSettingsView($event)"
    [chatServer]="chatServerToPass">
  </chat-server-settings>
  <user-settings
    *ngIf="userSettingsState"
    [user]="currentUser"
    (onClose)="toggleUserSettingsView($event)"
    (onUserUpdate)="refreshUser($event)">
  </user-settings>
</div>

